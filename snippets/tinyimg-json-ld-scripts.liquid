
<script type="application/ld+json">
  {%- assign same_as = "display_same_as" -%}
  {%- assign facebook = "display_facebook_url" -%}
  {%- assign linkedin = "hide_linkedin_url" -%}
  {%- assign pinterest = "hide_pinterest_url" -%}
  {%- assign twitter = "hide_twitter_url" -%}
  {%- assign instagram = "display_instagram_url" -%}
{
 "@context": "https://schema.org",
 "@type": "WebSite",
 "name": "Mascullino",
 "url": "{{ shop.domain }}",
  {%- if same_as == "display_same_as" -%}
 "sameAs": [
 {%- if facebook == "display_facebook_url" -%}
        "https://www.facebook.com/mascullino"
            {%- if twitter == "display_twitter_url" or instagram == "display_instagram_url" or pinterest == "display_pinterest_url" or linkedin == "display_linkedin_url" -%}
                ,
            {%- endif -%}
        {%- endif -%}
        {%- if twitter == "display_twitter_url" -%}
        ""
            {%- if instagram == "display_instagram_url" or pinterest == "display_pinterest_url" or linkedin == "display_linkedin_url" -%}
                ,
            {%- endif -%}
        {%- endif -%}
        {%- if instagram == "display_instagram_url" -%}
        "https://www.instagram.com/mascullino_tm/"
             {%- if pinterest == "display_pinterest_url" or linkedin == "display_linkedin_url" -%}
                ,
             {%- endif -%}
        {%- endif -%}
        {%- if pinterest == "display_pinterest_url" -%}
        ""
              {%- if linkedin == "display_linkedin_url" -%}
                ,
             {%- endif -%}
        {%- endif -%}
        {%- if linkedin == "display_linkedin_url" -%}
        ""
        {%- endif -%}
        ],
 {%- endif -%}      
 "potentialAction": {
      "@type": "SearchAction",
      "target": "https://{{ shop.domain }}/search?q={query}",
      "query-input": "required name=query",
      "url": "https://{{ shop.domain }}"
 }
}
</script>
    
<script type="application/ld+json">
  {%- assign description = "display_description" -%}
  {%- assign store = "MensClothingStore" -%}
  {%- assign working_hours = "times" -%}
  {%- assign custom_hours = "custom_hours" -%}
  {%- assign JSONLD_hours_mo_open = "open" -%}
  {%- assign JSONLD_hours_tu_open = "open" -%}
  {%- assign JSONLD_hours_we_open = "open" -%}
  {%- assign JSONLD_hours_th_open = "open" -%}
  {%- assign JSONLD_hours_fr_open = "open" -%}
  {%- assign JSONLD_hours_sa_open = "open" -%}
  {%- assign JSONLD_hours_su_open = "closed" -%}
  
  {%- assign price_range = "display_price_range" -%}
  {%- assign geo = "hide_heo" -%}
  {%- assign address = "display_address" -%}
  {%- assign street_address = "display_street_address" -%}
  {%- assign address_locality = "display_address_locality" -%}
  {%- assign address_region = "display_address_region" -%}
  {%- assign address_country = "display_address_country" -%}
  {%- assign contact_info = "display_contact_info" -%}
  {%- assign number = "display_number" -%}
  {%- assign email = "display_email" -%}
  
{
 "@context": "https://schema.org",
 "@type": "MensClothingStore",
 "name":"Mascullino",
  {%- unless working_hours == "times" -%}
 "openingHours":"Mo-Su 00:00-00:00",
 {%- endunless -%}
 "url": "{{ shop.url}}",
 {%- if description == "display_description" -%}
    "description": "За Мъже с Бради | Ела в Брадатото семейство и намери всичко, от което брадата ти се нуждае | Качествена козметика на достъпни цени!",
 {%- endif -%}
  {%- if number == "display_number" -%}
    "telephone": "+359899819176",
 {%- endif -%}
 "image": "https://image-optimizer.salessquad.co.uk/images/json-ld/080343ebbc2209a554577dbf284d78c5.png",
 {%- if price_range == "display_price_range" -%}
    "priceRange": "20{{ shop.currency }} - 150{{ shop.currency }}",
 {%- endif -%}
 
 {%- if custom_hours == "custom_hours" -%}
 "openingHoursSpecification": [
 	{%- unless JSONLD_hours_mo_open == "closed" -%}
 	{
 	"@type": "OpeningHoursSpecification",
 	"dayOfWeek": "http://schema.org/Monday",
 	"opens": "09:00",
 	"closes": "19:00"
 	}
 	{%- if JSONLD_hours_tu_open == "open" or JSONLD_hours_we_open == "open" or JSONLD_hours_th_open == "open" or JSONLD_hours_fr_open == "open" or JSONLD_hours_sa_open == "open" or JSONLD_hours_su_open == "open" -%}
 	,
 	{% endif %}
 	{%- endunless -%}
	{%- unless JSONLD_hours_tu_open == "closed" -%}
 	{
 	"@type": "OpeningHoursSpecification",
 	"dayOfWeek": "http://schema.org/Tuesday",
 	"opens":  "09:00",
 	"closes": "19:00"
 	}
 	{%- if JSONLD_hours_we_open == "open" or JSONLD_hours_th_open == "open" or JSONLD_hours_fr_open == "open" or JSONLD_hours_sa_open == "open" or JSONLD_hours_su_open == "open" -%}
 	,
 	{% endif %}
 	{%- endunless -%}
 	{%- unless JSONLD_hours_we_open == "closed" -%}
 	{
 	"@type": "OpeningHoursSpecification",
 	"dayOfWeek": "http://schema.org/Wednesday",
 	"opens": "09:00",
 	"closes": "19:00"
 	}
 	 {%- if JSONLD_hours_th_open == "open" or JSONLD_hours_fr_open == "open" or JSONLD_hours_sa_open == "open" or JSONLD_hours_su_open == "open"  -%}
 	,
 	{% endif %}
 	{%- endunless -%}
 	{%- unless JSONLD_hours_th_open == "closed" -%}
 	{
 	"@type": "OpeningHoursSpecification",
 	"dayOfWeek": "http://schema.org/Thursday",
 	"opens": "09:00",
 	"closes": "19:00"
 	}
 	 {%- if JSONLD_hours_fr_open == "open" or JSONLD_hours_sa_open == "open" or JSONLD_hours_su_open == "open" -%}
 	,
 	{% endif %}
 	{%- endunless -%}
 	{%- unless JSONLD_hours_fr_open == "closed" -%}
 	{
 	"@type": "OpeningHoursSpecification",
 	"dayOfWeek": "http://schema.org/Friday",
 	"opens":  "09:00",
 	"closes": "19:00"
 	}
 	{%- if JSONLD_hours_sa_open == "open" or JSONLD_hours_su_open == "open" -%}
 	,
 	{% endif %}
 	{%- endunless -%}
 	{%- unless JSONLD_hours_sa_open == "closed" -%}
 	{
 	"@type": "OpeningHoursSpecification",
 	"dayOfWeek": "http://schema.org/Saturday",
 	"opens": "09:00",
 	"closes": "13:00"
 	}
 	{%- if JSONLD_hours_su_open == "open" -%}
 	,
 	{% endif %}
 	{%- endunless -%}
 	{%- unless JSONLD_hours_su_open == "closed" -%}
 	{
 	"@type": "OpeningHoursSpecification",
 	"dayOfWeek": "http://schema.org/Sunday",
 	"opens": "10:00",
 	"closes": "18:00"
 	}
 	{%- endunless -%}
 ],
{% endif %}
  {%- if geo == "display_geo" -%}
 "geo": {
 	"@type": "GeoCoordinates",
 	"latitude": "",
 	"longitude": ""
 },
  {%- endif -%}
  
   {%- if address == "display_address" -%}
 "address": {
 	"@type": "PostalAddress",
 	{%- if street_address == "display_street_address" -%}
 	    "streetAddress": "Hristo Maksimov St 73"
 	    {%- if address_locality == "display_address_locality" or address_region == "display_address_region" or address_country == "display_address_country" -%}
 	        ,
 	    {%- endif -%}
 	{%- endif -%}
 	    {%- if address_locality == "display_address_locality" -%}
 	"addressLocality": "Sofia"
 	 	{%- if address_region == "display_address_region" or address_country == "display_address_country" -%}
 	        ,
 	    {%- endif -%}
 	{%- endif-%}
 	{%- if address_region == "display_address_region" -%}
 	    "addressRegion": "Sofia"
 	     {%- if address_country == "display_address_country" -%}
 	        ,
 	    {%- endif -%}
 	{%- endif -%}
 	{%- if address_country == "display_address_country" -%}
 	    "addressCountry": "Bulgaria"
 	{%- endif -%}
    }
        {%- if contact_info == "display_contact_info" -%}
            ,
        {%- endif -%}
    {%- endif -%}
    
    {%- if contact_info == "display_contact_info" -%}
     "contactPoint": {
       "@type": "ContactPoint",
       "contactType": "customer support",
       {%- if number == "display_number" -%}
       "telephone": "+359899819176"
       	 {%- if email == "display_email" -%}
 	        ,
 	     {%- endif -%}
       {%- endif -%}
       {%- if email == "display_email" -%}
       "email": "ptrminkov@gmail.com"
       {%- endif -%}
     }
 {%- endif -%}
 }
 </script>
    
{% if template == 'article' %}
<script type="application/ld+json">
 {
 "@context": "https://schema.org",
 "@type": "Article",
 "url": {{ canonical_url | json }},
 "datePublished": "{{ article.published_at}}",
 "dateModified": "{{ article.updated_at }}",
 "dateCreated": "{{ article.created_at }}",
 "description": {{ article.excerpt_or_content | escape | strip_html | json }},
 "articleBody": {{ article.content | strip_html | json }},
 "mainEntityOfPage": {{ article.excerpt | strip_html | json }},
 "headline": {{ article.title | json }},
 "image": "https:{{ article | img_url: '1024x1024' }}",
 "author": "{{ article.author }}",
 "publisher": {
        "@type": "Organization",
		"name": "Mascullino",
        "logo": {
                "@type": "ImageObject",
                "url": "https://image-optimizer.salessquad.co.uk/images/json-ld/080343ebbc2209a554577dbf284d78c5.png"
  }
 }
}
</script>
{%- endif -%}
        {% if template == 'product' %}
<script type="application/ld+json">
    {
      "@context": "https://schema.org/",
      "@type": "Product",

      {%- assign barCodeSet = false -%}
      {%- assign isValidGtinLength = false -%}
      {%- assign gtin = "gtin" -%}
      {% assign productPriceValidUntil = 90 | times: 86400 %}

      {%- if product.selected_or_first_available_variant.barcode != blank -%}
          {%- assign barCodeSet = true -%}
          {%- assign gtinLength = product.selected_or_first_available_variant.barcode | size -%}
          {%- if gtinLength == 8 or gtinLength == 12 or gtinLength == 13 or gtinLength == 14 -%}
              {%- assign isValidGtinLength = true -%}
              {%- assign gtin = gtin | append: gtinLength -%}
          {%- endif -%}
      {%- endif -%}

      {%- if barCodeSet and isValidGtinLength %}
          "{{gtin}}": "{{product.selected_or_first_available_variant.barcode}}",
          "productId": "{{product.selected_or_first_available_variant.barcode}}",
          {%- elsif barCodeSet %}
          "productId": "{{product.selected_or_first_available_variant.barcode}}",
          "mpn": "{{product.selected_or_first_available_variant.barcode}}",
      {%- else -%}
          {%- if product.first_available_variant.sku != blank -%}
          "mpn": {{ product.first_available_variant.sku | json }},
          {%- else -%}
          "mpn": {{ product.first_available_variant.id | json }},
          {%- endif -%}
      {%- endif %}

      {%- if product.selected_or_first_available_variant.sku != blank %}
           "sku": "{{product.selected_or_first_available_variant.sku}}",
      {%- else -%}
           "sku": {{ product.first_available_variant.id | json }},
      {%- endif -%}

      {% if collection_urls != blank %}
              "category": [
                  {{ collection_urls }}
              ],
      {% else %}
              "category": {{ product.type | json }},
      {%- endif -%}

      {%- if product.selected_or_first_available_variant.weight != blank %}
              "weight": "{{ product.selected_or_first_available_variant.weight | weight_with_unit | replace: " ", "" }}",
      {%- endif -%}

      "offers" : [
           {% for variant in product.variants -%}{
               "@type" : "Offer" ,
               {%- if barCodeSet and isValidGtinLength %}
                   "{{gtin}}": "{{variant.barcode}}",
               {%- elsif barCodeSet %}
                   "mpn": "{{variant.barcode}}",
               {% else %}
                   "mpn": {{ variant.id | json }},
               {%- endif %}

               {%- if variant.sku != blank %}
                   "sku": "{{ variant.sku }}",
               {% else %}
                   "sku": {{ variant.id | json }},
               {%- endif -%}

               "priceCurrency" : "{{ shop.currency }}" ,
               "price": "{{ variant.price | divided_by: 100.00 | remove: ',' }}",
               "priceValidUntil": "{{"now" | date: "%s" | plus: productPriceValidUntil | date: "%Y-%m-%d"}}",
               "availability" : "http://schema.org/{% if variant.available %}InStock{% else %}OutOfStock{% endif %}",
               "itemCondition": "http://schema.org/NewCondition",

               {%- if variant.title != "Default Title" %}
                   "name": "{{ variant.title | strip_newlines | strip_html | escape_once | replace: '\', '\\\\' | replace: '"',"'" }}",
               {%- endif %}
                   "url" : "{{ shop.url | append: variant.url }}",
                   "seller" : {
                       "@type" : "Organization",
                       "name" : "{{ shop.name | strip_newlines | strip_html | escape_once | replace: '\', '\\\\' | replace: '"',"'" }}"
                   }
               }{% unless forloop.last %},
               {% endunless %}{% endfor %}
           ],

        "name": {{ product.title | json }},
        {%- if product.featured_image -%}
        "image": "https:{{ product.featured_image | product_img_url: 'master' }}",
        {%- endif -%}

    {%- if product.metafields.eggviews.reviews_average and product.metafields.eggviews.reviews_count != '0' -%}
    {%- assign ratingValue = product.metafields.eggviews.reviews_average -%}
    {%- assign reviewCount = product.metafields.eggviews.reviews_count -%}
    {%- endif -%}
    {%- if product.metafields.judgeme -%}
    {%- assign ratingValue = product.metafields.judgeme.badge | split: "data-average-rating='" | last | split: "'" |first | plus: 0 -%}
    {%- assign reviewCount = product.metafields.judgeme.badge | split: "data-number-of-reviews='" | last | split: "'" |first | plus: 0 -%}
    {%- endif -%}
    {%- if product.metafields.opinew.reviews_rich_snippet != blank -%}
    {%- assign ratingValue = product.metafields.opinew.reviews_rich_snippet | split: 'ratingValue" content="' | last | split: '"' |first | plus: 0 -%}
    {%- assign reviewCount = product.metafields.opinew.reviews_rich_snippet | split: 'ratingCount" content="' | last | split: '"' |first | plus: 0 -%}
    {%- endif -%}

    {%- if product.metafields.reviewapp.reviews -%}
    {%- assign ratingValue = product.metafields.reviewapp.reviews | split: '"average" itemprop="ratingValue">' | last | split: '</span>' |first | plus: 0 -%}
    {%- assign reviewCount = product.metafields.reviewapp.reviews | split: '"votes" itemprop="ratingCount">' | last | split: "</span>" | first | plus: 0 -%}
    {%- endif -%}
    {%- if product.metafields.yotpo.reviews_average and product.metafields.yotpo.reviews_count != '0' -%}
    {%- assign ratingValue = product.metafields.yotpo.reviews_average -%}
    {%- assign reviewCount = product.metafields.yotpo.reviews_count -%}
    {%- endif -%}
    {%- if product.metafields.kudobuzz.review_rating and product.metafields.kudobuzz.reviews_count != "0" -%}
    {%- assign ratingValue = product.metafields.kudobuzz.review_rating -%}
    {%- assign reviewCount = product.metafields.kudobuzz.reviews_count -%}
    {%- endif -%}
    {%- if product.metafields.loox.num_reviews and product.metafields.loox.num_reviews != "0" -%}
    {%- assign ratingValue = product.metafields.loox.avg_rating -%}
    {%- assign reviewCount = product.metafields.loox.num_reviews -%}
    {%- endif -%}
    {%- if product.metafields.okendo.summaryData.reviewAverageValue and product.metafields.okendo.summaryData.reviewCount != "0" -%}
    {%- assign ratingValue = product.metafields.okendo.summaryData.reviewAverageValue -%}
    {%- assign reviewCount = product.metafields.okendo.summaryData.reviewCount -%}
    {%- endif -%}
    {%- if product.metafields.orankl.RatingAndReviewAverageValue and product.metafields.orankl.RatingAndReviewAverageValue != "0" -%}
    {%- assign ratingValue = product.metafields.orankl.rating -%}
    {%- assign reviewCount = product.metafields.orankl.review_count -%}
    {%- endif -%}
    {%- if product.metafields.reviewscouk.rating and product.metafields.reviewscouk.rating != "0" -%}
    {%- assign ratingValue = product.metafields.reviewscouk.rating -%}
    {%- assign reviewCount = product.metafields.reviewscouk.total -%}
    {%- endif -%}
    {%- if product.metafields.reevio.reviews_average and product.metafields.reevio.reviews_count != "0" -%}
    {%- assign ratingValue = product.metafields.reevio.reviews_average -%}
    {%- assign reviewCount = product.metafields.reevio.reviews_count -%}
    {%- endif -%}
    {%- if product.metafields.ssw.count_rate and product.metafields.ssw.count_rate != "0" -%}
    {%- assign ratingValue = product.metafields.ssw.avg_rate -%}
    {%- assign reviewCount = product.metafields.ssw.count_rate -%}
    {%- endif -%}
    {%- if product.metafields.stamped.reviews_average and product.metafields.stamped.reviews_count != "0" -%}
    {%- assign ratingValue = product.metafields.stamped.reviews_average -%}
    {%- assign reviewCount = product.metafields.stamped.reviews_count -%}
    {%- endif -%}
    {%- if product.metafields.vnreviews.ratingValue and product.metafields.vnreviews.reviewCount != "0" -%}
    {%- assign ratingValue = product.metafields.vnreviews.ratingValue -%}
    {%- assign reviewCount = product.metafields.vnreviews.reviewCount -%}
    {%- endif -%}

    {%- if product.metafields.ryviu != blank %}
    {%- assign aggregateRating = product.metafields.ryviu.product_reviews_info | split: ";" -%}
    {%- assign ratingValueReviewArray = product.metafields.ryviu.product_reviews_info | split: ";" -%}
    {%- assign review_avg = aggregateRating[1] | plus: 0 -%}
    {%- assign review_count = aggregateRating[0] | plus: 0 -%}
    {%- assign reviewsCount = review_count -%}
        {%- unless reviewsCount == '0' -%}
            {%- assign ratingValue = review_avg -%}
            {%- assign reviewCount = review_count -%}
        {%- endunless -%}
    {%- endif -%}

    {% capture review_data %}{{ product.metafields.spr.reviews }}{% endcapture %}
    {% assign review_data1 = review_data | split: "reviewCount" %}
    {% assign review_data2 = review_data1[1] | split: ":" %}
    {% assign review_data3 = review_data2[1] | split: '"' %}
    {% assign reviewCountNotRounded = review_data3[1] | plus: 1 | minus: 1 %}
    {% assign reviewCount = reviewCountNotRounded | round: 1 %}

    {% assign review_data_value1 = review_data | split: "ratingValue" %}
    {% assign review_data_value2 = review_data_value1[1] | split: ":" %}
    {% assign review_data_value3 = review_data_value2[1] | split: '"' %}
    {% assign ratingValueNotRounded = review_data_value3[1] %}
    {% assign ratingValue = ratingValueNotRounded | round: 1 %}

    {%- if product.metafields.reviews.rating and product.metafields.reviews.rating_count != "0" -%}
    {%- assign ratingValue = product.metafields.reviews.rating.value -%}
    {%- assign reviewCount = product.metafields.reviews.rating_count -%}
    {%- endif -%}

    {%- unless reviewCount == 0 -%}
        "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "{{ ratingValue }}",
        "ratingCount": "{{ reviewCount }}",
        "bestRating": "5",
        "worstRating": "1"
    },
        {%- endunless -%}

    {%- assign newCondition = 'NewCondition' -%}
    "description": {{ product.description | escape | strip_html | json }},
    "itemCondition": "{{ newCondition }}",
    "manufacturer": {{ product.vendor | json }},
    "material": {{ product.material | strip_html | json }},
    "url": "{{ shop.url | append: '/products/' | append: product.handle }}",
    {% if product.options.size > 0 %}
        "additionalProperty":
        [
        {% for product_option in product.options_with_values %}
            {% if product_option.name != 'Title' %}
                {
                    "@type": "PropertyValue",
                    "name" : "{{ product_option.name | escape }}",
                    "value": [
                    {% for value in product_option.values %}"{{ value | escape }}"{% if forloop.last != true %},{% endif %}
                    {% endfor %}]
                }{% if forloop.last != true %},{% endif %}
            {% endif %}
        {% endfor %}
        ],
    {% endif %}
    "brand": {
      "@type": "Brand",
      "name": {{ product.vendor | json }}
    }
   }
</script>
{%- endif -%}
